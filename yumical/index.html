<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <link rel='stylesheet' type='text/css' href='themes/hot-sneaks/ui.all.css' />
  <link rel='stylesheet' type='text/css' href='fullcalendar/fullcalendar.css' />
  <link rel='stylesheet' type='text/css' href='style.css' />

  <script type='text/javascript' src='fullcalendar/jquery/jquery.js'></script>
  <script type='text/javascript' src='fullcalendar/jquery/ui.core.js'></script>
  <script type='text/javascript' src='fullcalendar/jquery/ui.dialog.js'></script>

  <!--   
  <script type='text/javascript' src='fullcalendar/jquery/ui.draggable.js'></script>
  <script type='text/javascript' src='fullcalendar/jquery/ui.resizable.js'></script>
  -->

  <script type='text/javascript' src='fullcalendar/fullcalendar.min.js'></script>
  <script type='text/javascript' src='gcal2.js'></script>
  <script type='text/javascript'>
  $(document).ready(function() {  
    $('#calendar').fullCalendar({
      theme: true,

      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
      },

      // Public XML Feed
      events: $.fullCalendar.gcalFeed(
        'http://www.google.com/calendar/feeds/p5fak2qpg5jr67jhnrog9tm300@group.calendar.google.com/public/basic',
        { currentTimezone : "America/Phoenix" }
      ),

      eventClick: function(event) {
        var what = event.title;
        var details = event.description;
        var from = event.start;
        var to = event.end;
        var where = event.location;
        $("<div id='dialog' title='" + what + "'>" + 
            "<div class='details'>" + details + "</div>" + 
            "<div class='where'>Where: " + where + " (<a href='http://maps.google.com/?q=" + where + "'>map</a>)</div>" + 
           "</div>").dialog(
          { 
            hide: 'slide',
            stack: false 
          }
        );
        // window.open(event.url, 'gcalevent', 'width=700,height=600');
        return false;
      },

      eventMouseover: function(event) {
        console.log(event);
      },

      loading: function(bool) {
        if (bool) {
          $('#loading').show();
        }else{
          $('#loading').hide();
        }
      }
    });

  });
  </script>
</head>

<body>
  <div id='loading' style='display:none'>loading...</div>
  <div id='calendar'></div>
</body>
</html>
